(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76803f1a","chunk-73260bfb"],{"5a1d":function(e,t,i){},"780f":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.isVisible,title:e.addFundDialog.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[i("div",{staticClass:"form"},[i("el-form",{ref:"form",staticStyle:{margin:"10px",width:"auto"},attrs:{model:e.form,rules:e.form_rules,"label-width":e.dialog.formLabelWidth}},[i("el-form-item",{attrs:{size:"medium",prop:"username",label:"用户名:"}},[i("el-input",{attrs:{type:"text"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),i("el-form-item",{attrs:{size:"medium",prop:"tel",label:"手机号:"}},[i("el-input",{attrs:{maxlength:"11"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",e._n(t))},expression:"form.tel"}})],1),i("el-form-item",{attrs:{size:"medium",prop:"email",label:"邮箱:"}},[i("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),"add"===this.addFundDialog.type?i("el-form-item",{attrs:{size:"medium",prop:"password",label:"用户密码:"}},[i("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),i("el-form-item",{attrs:{size:"medium",prop:"deptId",label:"部门:"}},[i("el-select",{staticStyle:{display:"block"},attrs:{placeholder:"请选择"},model:{value:e.deptId,callback:function(t){e.deptId=t},expression:"deptId"}},e._l(e.deptOptions,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{size:"medium",prop:"roleId",label:"角色:"}},[i("el-select",{staticStyle:{display:"block"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleOptions,function(e){return i("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1),i("el-form-item",{staticClass:"text_right"},[i("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提  交")])],1)],1)],1)])},n=[],o=(i("ac6a"),i("c24f")),s=i("cc5e"),r=i("fe05"),l={name:"addFundDialogs",data:function(){return{areaData:[],isVisible:this.isShow,form:{username:"",password:"",roleId:[],deptId:0,email:"",tel:""},deptId:"",roleOptions:[],deptOptions:[],form_rules:{tel:[{required:!0,message:"手机号码不能为空！",trigger:"change"}],username:[{required:!0,message:"用户名不能为空！",trigger:"change"}],password:[{required:!0,message:"用户密码不能为空！",trigger:"change"}],roleId:[{required:!0,message:"用户角色不能为空",trigger:"change"}]},dialog:{width:"400px",formLabelWidth:"120px"}}},props:{isShow:Boolean,dialogRow:Object,addFundDialog:Object},created:function(){this.listRoles(),this.listDept()},mounted:function(){var e=this;if("edit"===this.addFundDialog.type){this.form=Object.assign({},this.dialogRow),void 0===this.form.deptId&&(this.deptId="");var t=[];void 0!==this.dialogRow.deptId&&(this.deptId=this.dialogRow.deptId),this.dialogRow.roles.forEach(function(e){t.push(e.roleId)}),this.$set(this.form,"roleId",t)}else this.$nextTick(function(){e.$refs["form"].resetFields()})},methods:{listRoles:function(){var e=this;Object(s["g"])({page:1,limit:1e3}).then(function(t){e.roleOptions=t.data})},listDept:function(){var e=this;Object(r["c"])().then(function(t){e.deptOptions=t.data,console.log(e.deptOptions)})},closeDialog:function(){this.$emit("closeDialog")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(i){if(i){var a=t[e],n=Object.assign({},a);n.role=n.roleId.join(","),n.deptId=t.deptId,delete n.roles,console.log(n),"edit"===t.addFundDialog.type?Object(o["p"])(n).then(function(e){0===e.code?(t.$message({message:"修改成功",type:"success"}),t.$refs["form"].resetFields(),t.isVisible=!1,t.$emit("getFundList")):t.$message.error(e.msg)}):Object(o["b"])(n).then(function(e){0===e.code?(t.$message({message:"新增成功",type:"success"}),t.$refs["form"].resetFields(),t.isVisible=!1,t.$emit("getFundList")):t.$message.error(e.msg)})}})}}},d=l,u=(i("da4a"),i("2877")),c=Object(u["a"])(d,a,n,!1,null,"dc9b72c2",null);t["default"]=c.exports},ca27:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"12px","background-color":"#ffffff"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"user:add",expression:"`user:add`"}],attrs:{size:"small",type:"primary"},on:{click:e.showAddDialog}},[e._v("新增用户")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"760",size:"small"}},[i("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),i("el-table-column",{attrs:{prop:"deptName",label:"部门",width:"180"}}),i("el-table-column",{attrs:{prop:"email",width:"180",label:"邮箱"}}),i("el-table-column",{attrs:{prop:"createTime",width:"180",label:"创建时间"}}),i("el-table-column",{attrs:{prop:"lastLoginTime",width:"180",label:"最后登陆时间"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"user:update",expression:"`user:update`"}],attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.showEditDialog(t.row)}}},[e._v("修改")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"user:reset",expression:"`user:reset`"}],attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.resetPassword(t.row.userId)}}},[e._v("重置密码")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"user:delete",expression:"`user:delete`"}],attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.deleteUser(t.row.userId)}}},[e._v("删除")])],1)]}}])})],1),i("el-row",[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[i("div",{staticClass:"pagination"},[e.paginations.total>0?i("el-pagination",{attrs:{"page-sizes":e.paginations.pageSizes,"page-size":e.paginations.pageSize,layout:e.paginations.layout,total:e.paginations.total,"current-page":e.paginations.pageIndex},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])],1),e.addFundDialog.show?i("update-dialog",{attrs:{addFundDialog:e.dialog,isShow:e.addFundDialog.show,dialogRow:e.addFundDialog.dialogRow},on:{getFundList:e.listUser,closeDialog:e.hideAddFundDialog}}):e._e()],1)},n=[],o=i("c24f"),s=i("780f"),r={data:function(){return{tableData:[],paginations:{total:0,pageIndex:1,pageSize:20,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},addFundDialog:{show:!1,dialogRow:{}},dialog:{type:"",title:""}}},components:{updateDialog:s["default"]},created:function(){this.listUser()},methods:{listUser:function(){var e=this,t={page:this.paginations.pageIndex,limit:this.paginations.pageSize};Object(o["f"])(t).then(function(t){e.tableData=t.data,e.paginations.total=t.count})},hideAddFundDialog:function(){this.addFundDialog.show=!1},handleSizeChange:function(e){this.paginations.pageSize=e,this.listUser()},handleCurrentChange:function(e){this.paginations.pageIndex=e,this.listUser()},showAddDialog:function(){this.dialog.type="add",this.dialog.title="添加用户",this.addFundDialog.show=!0},showEditDialog:function(e){this.dialog.type="edit",this.dialog.title="修改用户",this.addFundDialog.dialogRow=e,this.addFundDialog.show=!0},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o["c"])(e).then(function(e){0===e.code?(t.$message("删除成功"),t.listUser()):t.$message(e.msg)})}).catch(function(){})},resetPassword:function(e){var t=this;Object(o["l"])(e,"123456").then(function(e){0===e.code?t.$message("重置密码成功"):t.$message.error(e.msg)})}}},l=r,d=i("2877"),u=Object(d["a"])(l,a,n,!1,null,null,null);t["default"]=u.exports},cc5e:function(e,t,i){"use strict";i.d(t,"g",function(){return s}),i.d(t,"f",function(){return r}),i.d(t,"c",function(){return l}),i.d(t,"i",function(){return d}),i.d(t,"a",function(){return u}),i.d(t,"b",function(){return c}),i.d(t,"d",function(){return p}),i.d(t,"e",function(){return m}),i.d(t,"h",function(){return f});var a=i("a27e"),n=i("4328"),o=i.n(n);function s(e){return Object(a["a"])({url:"/admin/role/list",method:"get",params:e})}function r(e,t){return Object(a["a"])({url:"/admin/role/".concat(e,"/grant/menu"),method:"post",data:o.a.stringify({menuIds:t})})}function l(e){return Object(a["a"])({url:"/admin/role/".concat(e,"/own/menu"),method:"get"})}function d(e){return Object(a["a"])({url:"/admin/role/update",method:"post",data:o.a.stringify(e)})}function u(e){return Object(a["a"])({url:"/admin/role/add",method:"post",data:o.a.stringify(e)})}function c(e){return Object(a["a"])({url:"/admin/role/".concat(e),method:"delete"})}function p(e){return Object(a["a"])({url:"/admin/role/".concat(e,"/own/operator")})}function m(e,t){return Object(a["a"])({url:"/admin/role/".concat(e,"/grant/operator"),method:"post",data:o.a.stringify({operatorIds:t})})}function f(e){return Object(a["a"])({url:"/admin/role/swap",method:"post",data:o.a.stringify(e)})}},da4a:function(e,t,i){"use strict";var a=i("5a1d"),n=i.n(a);n.a},fe05:function(e,t,i){"use strict";i.d(t,"c",function(){return s}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return l}),i.d(t,"b",function(){return d});var a=i("a27e"),n=i("4328"),o=i.n(n);function s(e){return Object(a["a"])({url:"/admin/dept/list",method:"get",params:e})}function r(e){return Object(a["a"])({url:"/admin/dept/add",method:"post",data:o.a.stringify(e)})}function l(e){return Object(a["a"])({url:"/admin/dept/update",method:"post",data:o.a.stringify(e)})}function d(e){return Object(a["a"])({url:"/admin/dept/".concat(e),method:"delete"})}}}]);