(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22036488","chunk-1640b91b","chunk-725d21de","chunk-52d0ffd9","chunk-2d6120f1","chunk-c6bebff8"],{"0b64":function(e,t,o){"use strict";var a=o("4a11"),n=o.n(a);n.a},1442:function(e,t,o){},"38b4":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{width:"1000px","background-color":"#ffffff",margin:"10px auto"}},[o("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:e.active,"finish-status":"success",simple:""}},[o("el-step",{attrs:{title:"基本信息"}}),o("el-step",{attrs:{title:"周边配置"}}),o("el-step",{attrs:{title:"历史成交价"}}),o("el-step",{attrs:{title:"房源图片"}})],1),1===e.active?o("basic-form",{on:{changeActive:e.setActive}}):e._e(),2===e.active?o("around-form",{on:{changeActive:e.setActive}}):e._e(),3===e.active?o("history-deal-form",{on:{changeActive:e.setActive}}):e._e(),4===e.active?o("house-res-form"):e._e()],1)},n=[],i=(o("f803"),o("8c05")),r=o("81d9"),s=o("5528"),l=o("bf5d"),c={components:{BasicForm:i["default"],AroundForm:r["default"],HistoryDealForm:s["default"],HouseResForm:l["default"]},data:function(){return{dialog:{width:"400px",formLabelWidth:"120px"},active:1}},methods:{setActive:function(e){this.active=e},closeDialog:function(){this.$emit("closeDialog")}}},u=c,d=(o("7a0a"),o("2877")),p=Object(d["a"])(u,a,n,!1,null,"f77dde60",null);t["default"]=p.exports},"3cf7":function(e,t,o){},"4a11":function(e,t,o){},5528:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{staticStyle:{padding:"10px 0"},attrs:{"label-width":"100px"}},e._l(e.deals,function(t,a){return o("el-row",{attrs:{gutter:12}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{prop:"development",label:"成交日期:"}},[o("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",size:"medium",placeholder:"选择日期"},model:{value:t.time,callback:function(o){e.$set(t,"time",o)},expression:"item.time"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"成交价格"}},[o("el-input",{attrs:{size:"medium"},model:{value:t.amount,callback:function(o){e.$set(t,"amount",o)},expression:"item.amount"}},[o("template",{slot:"append"},[e._v("万")])],2)],1)],1),o("el-col",{attrs:{span:8}},[o("el-button",{attrs:{icon:"el-icon-add",type:"primary",size:"medium"},on:{click:function(t){return e.addOneDeal(a)}}},[e._v("添加")])],1)],1)}),1),o("div",{staticStyle:{"text-align":"center",padding:"40px 0"}},[o("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.saveAndComplete}},[e._v("保存完成")]),o("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.next()}}},[e._v("下一步")]),o("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.saveAndNext}},[e._v("保存并下一步")])],1)],1)},n=[],i=o("f803"),r={data:function(){return{deals:[{time:"",amount:""}]}},methods:{saveAndComplete:function(){this.submit(1)},saveAndNext:function(){this.submit(2)},next:function(){this.$emit("changeActive",4)},submit:function(e){var t=this;0===this.deals.length&&alert("历史成交记录不能为空");for(var o=0;o<this.deals.length;o++){var a=this.deals[o];if(!a.amount||!a.time)return alert("字段不能为空"),0}var n=new FormData;n.append("housePropertyId",this.$route.query.houseId),n.append("deals",JSON.stringify(this.deals)),Object(i["d"])(n).then(function(o){0===o.code?1===e?(alert("添加成功"),t.$router.push("/house/addHistory")):t.$emit("changeActive",4):alert(o.msg)})},addOneDeal:function(e){this.deals.splice(e+1,0,{dealDate:"",dealAmount:""})}}},s=r,l=o("2877"),c=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports},"56dc":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{visible:e.isVisible,title:"添加角色","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[o("div",{staticClass:"form"},[o("el-form",{ref:"form",staticStyle:{margin:"10px",width:"auto"},attrs:{model:e.form,rules:e.form_rules,"label-width":e.dialog.formLabelWidth}},[o("el-form-item",{attrs:{prop:"username",label:"角色名称:"}},[o("el-input",{attrs:{type:"text"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),o("el-form-item",{attrs:{prop:"username",label:"描述:"}},[o("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),o("el-form-item",{staticClass:"text_right"},[o("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提  交")])],1)],1)],1)])},n=[],i=(o("8e6e"),o("ac6a"),o("456d"),o("bd86")),r=o("5880"),s=o("cc5e");function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(o,!0).forEach(function(t){Object(i["a"])(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var u={name:"updateDialog",data:function(){return{areaData:[],isVisible:this.isShow,form:{roleName:"",remark:""},form_rules:{roleName:[{required:!0,message:"用户名不能为空！",trigger:"blur"}]},dialog:{width:"400px",formLabelWidth:"120px"}}},props:{isShow:Boolean,dialogRow:Object},computed:c({},Object(r["mapGetters"])(["addFundDialog"])),mounted:function(){this.form=Object.assign({},this.dialogRow)},methods:{closeDialog:function(){this.$emit("closeDialog")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(o){var a=t[e],n=Object.assign({},a);Object(s["a"])(n).then(function(e){0===e.code?(t.$message("修改成功"),t.closeDialog(),t.$emit("getFundList")):t.$message.error(e.msg)})}})}}},d=u,p=(o("6d88"),o("2877")),f=Object(p["a"])(d,a,n,!1,null,"fb27e3fe",null);t["default"]=f.exports},"69d9":function(e,t,o){"use strict";var a=o("ba91"),n=o.n(a);n.a},"6d88":function(e,t,o){"use strict";var a=o("1442"),n=o.n(a);n.a},7053:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{visible:e.isVisible,title:"授权操作","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[o("div",{staticClass:"form"},[o("tree",{attrs:{nodes:e.menuTree,setting:e.setting},on:{onClick:e.onClick,onCheck:e.onCheck,onCreated:e.handleCreated}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.postSelected}},[e._v("确认选择")])],1)])},n=[],i=(o("8e6e"),o("456d"),o("ac6a"),o("bd86")),r=o("5880"),s=o("f419"),l=o.n(s),c=o("1f27"),u=o("cc5e"),d=o("96bd");function p(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?p(o,!0).forEach(function(t){Object(i["a"])(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var m={components:{tree:l.a},name:"grantMenuDialog",data:function(){return{isVisible:this.isShow,setting:{check:{enable:!0},data:{simpleData:{enable:!0,pIdKey:"parentId"}},view:{showIcon:!1,addHoverDom:this.addHoverDom,removeHoverDom:this.removeHoverDom},key:{url:"href"}},menuTree:[],zTreeObj:{},rootMenu:[],activeId:0,roleOperators:[]}},props:{isShow:Boolean,dialogRow:Object},computed:f({},Object(r["mapGetters"])(["addFundDialog"])),created:function(){this.getOperatorTree(),this.getRoleOperators()},methods:{getOperatorTree:function(){var e=this;Object(d["d"])().then(function(t){e.menuTree=t.data,e.menuTree.forEach(function(t){e.setOperatorChecked(t)}),console.log(e.menuTree)})},setOperatorChecked:function(e){var t=this;e.checkArr?e.checked=this.roleOperators.indexOf(e.id)>-1:e.nocheck=!0,e.children&&e.children.length>0&&e.children.forEach(function(e){t.setOperatorChecked(e)})},closeDialog:function(){this.$emit("closeDialog")},getRoleOperators:function(){var e=this;Object(u["d"])(this.dialogRow.roleId).then(function(t){e.roleOperators=t.data,console.log(e.roleOperators),e.getOperatorTree(),console.log(t)})},getMenuTree:function(e){var t=this;Object(c["e"])().then(function(o){t.setChecked(o.data,e),t.menuTree=o.data})},setChecked:function(e,t){var o=this;e.forEach(function(e){t.indexOf(e.id)>-1&&(e.checked=!0),e.children&&e.children.length>0&&o.setChecked(e.children,t)})},onClick:function(e,t,o){return e.preventDefault(),!1},onCheck:function(e,t,o){},handleCreated:function(e){this.zTreeObj=e},postSelected:function(){var e=this,t=this.dialogRow.roleId,o=[];this.zTreeObj.getCheckedNodes().forEach(function(e){o.push(e.id)});var a=o.join(",");console.log(a),Object(u["e"])(t,a).then(function(t){0===t.code?(e.$message("授权成功"),e.closeDialog()):e.$message.error(t.msg)})}}},h=m,g=(o("0b64"),o("2877")),b=Object(g["a"])(h,a,n,!1,null,"166fe3d5",null);t["default"]=b.exports},7324:function(e,t,o){"use strict";var a=o("baa9"),n=o.n(a);n.a},"7a0a":function(e,t,o){"use strict";var a=o("d408"),n=o.n(a);n.a},8049:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{padding:"12px"}},[o("el-button",{attrs:{"v-permission":"role:add",type:"primary"},on:{click:e.showAddDialog}},[e._v("添加角色")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small"}},[o("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),o("el-table-column",{attrs:{prop:"remark",label:"描述",width:"180"}}),o("el-table-column",{attrs:{width:"300",label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"role:grant:menu",expression:"`role:grant:menu`"}],attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.showGrantDialog(t.row)}}},[e._v("授权菜单")]),o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"role:grant:operator",expression:"`role:grant:operator`"}],attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.showGrantOperator(t.row)}}},[e._v("授权操作")])],1)]}}])}),o("el-table-column",{attrs:{label:"排序",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.swap(t.$index,Number(t.$index-1))}}},[e._v("上移")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.swap(t.$index,Number(t.$index+1))}}},[e._v("下移")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.swap(t.$index,0)}}},[e._v("置顶")]),o("el-button",{attrs:{type:"primary"},on:{click:function(o){return e.swap(t.$index,e.tableData.length-1)}}},[e._v("置底")])]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",[o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"role:update",expression:"`role:update`"}],attrs:{size:"mini",type:"primary"},on:{click:function(o){return e.showUpdateDialog(t.row)}}},[e._v("修改")]),o("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"role:delete",expression:"`role:delete`"}],attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row.roleId)}}},[e._v("删除")])],1)]}}])})],1),o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"pagination"},[e.paginations.total>0?o("el-pagination",{attrs:{"page-sizes":e.paginations.pageSizes,"page-size":e.paginations.pageSize,layout:e.paginations.layout,total:e.paginations.total,"current-page":e.paginations.pageIndex},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])],1),e.addFundDialog.show?o("grant-menu-dialog",{attrs:{isShow:e.addFundDialog.show,dialogRow:e.addFundDialog.dialogRow},on:{refreshList:e.handleRefresh,closeDialog:e.hideGrantDialog}}):e._e(),e.updateDialog.show?o("update-dialog",{attrs:{isShow:e.updateDialog.show,dialogRow:e.updateDialog.dialogRow},on:{getFundList:e.listUser,closeDialog:e.hideUpdateDialog}}):e._e(),e.addDialog.show?o("add-dialog",{attrs:{isShow:e.addDialog.show,dialogRow:e.addDialog.dialogRow},on:{getFundList:e.listUser,closeDialog:e.hideAddDialog}}):e._e(),e.operatorDialog.show?o("grant-operator-dialog",{attrs:{isShow:e.operatorDialog.show,dialogRow:e.operatorDialog.dialogRow},on:{getFundList:e.listUser,closeDialog:e.hideOperatorDialog}}):e._e()],1)},n=[],i=o("cc5e"),r=o("883e"),s=o("e7f3"),l=o("56dc"),c=o("7053"),u=o("38b4"),d={components:{Add:u["default"],grantMenuDialog:r["default"],updateDialog:s["default"],grantOperatorDialog:c["default"],addDialog:l["default"]},data:function(){return{tableData:[],paginations:{total:0,pageIndex:1,pageSize:20,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},addFundDialog:{show:!1,dialogRow:{}},operatorDialog:{show:!1,dialogRow:{}},updateDialog:{show:!1,dialogRow:{}},addDialog:{show:!1,dialogRow:{}}}},created:function(){console.log(this.$store.getters.addRouters),this.listUser()},methods:{listUser:function(){var e=this,t={page:this.paginations.pageIndex,limit:this.paginations.pageSize};Object(i["g"])(t).then(function(t){console.log(t),e.tableData=t.data})},showGrantDialog:function(e){this.addFundDialog.dialogRow=e,this.addFundDialog.show=!0},showAddDialog:function(){this.addDialog.show=!0},hideGrantDialog:function(){this.addFundDialog.show=!1},hideUpdateDialog:function(){this.updateDialog.show=!1},hideAddDialog:function(){this.addDialog.show=!1},showUpdateDialog:function(e){this.updateDialog.dialogRow=e,this.updateDialog.show=!0},handleSizeChange:function(e){this.paginations.pageSize=e,this.listUser()},handleCurrentChange:function(e){this.paginations.pageIndex=e,this.listUser()},handleRefresh:function(){},showEditDialog:function(){},handleDelete:function(e){var t=this;this.$confirm("是否确认删除该角色?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i["b"])(e).then(function(e){0===e.code?(t.$message("删除成功"),t.listUser()):t.$message.error(e.msg)})}).catch(function(){})},showGrantOperator:function(e){this.operatorDialog.dialogRow=e,this.operatorDialog.show=!0},hideOperatorDialog:function(){this.operatorDialog.show=!1},swap:function(e,t){var o=this,a=this.tableData[e].roleId,n=this.tableData[t].roleId;console.log({currentId:a,swapId:n}),Object(i["h"])({currentId:a,swapId:n}).then(function(e){0===e.code?o.listUser():alert(e.msg)})}}},p=d,f=o("2877"),m=Object(f["a"])(p,a,n,!1,null,null,null);t["default"]=m.exports},"81d9":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{position:"relative"},attrs:{id:"container"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.key,expression:"key"}],staticStyle:{"z-index":"10000",width:"160px",position:"absolute",height:"40px",top:"20px",left:"10px"},attrs:{type:"text",placeholder:"请输入周边关键字"},domProps:{value:e.key},on:{input:function(t){t.target.composing||(e.key=t.target.value)}}}),o("button",{staticStyle:{"z-index":"10000",position:"absolute",height:"40px",top:"20px",left:"200px",width:"60px"},attrs:{type:"button"},on:{click:e.searchAround}},[e._v("搜索")])]),o("div",{staticClass:"points-wrapper"},[o("el-form",{attrs:{"label-width":"100px"}},[o("div",[o("div",{staticClass:"title"},[e._v("Tips:请点击地图拾取地点")]),e._l(e.points,function(t,a){return o("el-row",{staticStyle:{padding:"5px 0"}},[o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"地点名称："}},[o("el-input",{attrs:{size:"small"},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1)],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"经纬度："}},[o("div",[e._v(e._s(t.latLng.lat.toFixed(5))+","+e._s(t.latLng.lng.toFixed(5)))])])],1),o("el-col",{attrs:{span:4}},[o("el-form-item",{attrs:{label:"距离："}},[o("div",[e._v(e._s(Math.ceil(e.computeDistance(t.latLng.lat,t.latLng.lng)))+"米")])])],1),o("el-col",{attrs:{span:6}},[o("el-form-item",{attrs:{label:"地点分类"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.pointType,callback:function(o){e.$set(t,"pointType",o)},expression:"item.pointType"}},e._l(e.pointTypeOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),o("el-col",{attrs:{span:2}},[o("div",{staticStyle:{padding:"0 10px"}},[o("el-button",{attrs:{size:"small",type:"danger",icon:"el-delete"},on:{click:function(o){return e.removeSchoolPoint(t,a)}}},[e._v("删除")])],1)])],1)})],2)])],1),o("div",{staticStyle:{"text-align":"center",padding:"40px 0"}},[o("el-button",{attrs:{size:"medium"},on:{click:e.saveAndComplete}},[e._v("保存完成")]),o("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.saveAndNext}},[e._v("保存并下一步")]),o("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.next}},[e._v("下一步")])],1)])},n=[],i=(o("7f7f"),o("f803")),r={data:function(){return{map:null,markerLayer:null,markers:[],id:1,key:"",marker2:void 0,points:[],houseLatlng:{lat:"",lng:""},pointTypeOptions:[{label:"交通",value:1},{label:"教育",value:2},{label:"医疗",value:3},{label:"生活",value:4},{label:"休闲",value:5}]}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this,t=new TMap.LatLng(22.535512,114.028745);this.$route.query.lat&&(t=new TMap.LatLng(this.$route.query.lat,this.$route.query.lng)),this.$set(this.houseLatlng,"lat",t.lat),this.$set(this.houseLatlng,"lng",t.lng);var o=t,a=new TMap.Map(document.getElementById("container"),{center:o,zoom:16});this.map=a;document.getElementById("mapContainer");var n=new TMap.InfoWindow({map:a,position:a.getCenter()}).close();a.on("click",function(t){var o=t.poi;o?(e.points.push(Object.assign({id:e.id,pointType:""},o)),e.markerLayer.add({position:o.latLng,id:e.id++})):n.close()}),this.initMarkerLayer(a),this.createHouseMarker(t.lat,t.lng)},initMarkerLayer:function(e){this.markerLayer=new TMap.MultiMarker({id:"marker-layer",map:e})},searchAround:function(){console.log("ok");var e=["https://apis.map.qq.com/ws/place/v1/search","?boundary=nearby(22.535512,114.028745,1000,0)","&keyword=".concat(this.key),"&page_size=10&page_index=1&orderby=_distance","&output=jsonp&callback=cb","&key=6NKBZ-2OL3G-OP7QZ-I2KDF-CZGKT-HOFL5"].join("");this.jsonp_request(e)},jsonp_request:function(e){this.$jsonp(e).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},createHouseMarker:function(e,t){this.marker2||(this.marker2=new TMap.MultiMarker({id:"marker-layer2",map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"http://8.130.26.25:7005/file/20210507/e6fabe0608b34657b10a4459f228e928.png"})},geometries:[{id:"demo",styleId:"marker",position:new TMap.LatLng(e,t),properties:{title:"marker"}}]}))},computeDistance:function(e,t){var o=new TMap.LatLng(e,t),a=new TMap.LatLng(this.houseLatlng.lat,this.houseLatlng.lng),n=[o,a];return TMap.geometry.computeDistance(n)},removeSchoolPoint:function(e){this.markerLayer.remove(e.id),this.points.splice(e,1)},submit:function(e){for(var t=this,o=[],a=0;a<this.points.length;a++){var n=this.points[a];if(""===n.pointType)return alert("建筑类型不能为空"),0;o.push({buildingName:n.name,lat:n.latLng.lat,lng:n.latLng.lng,type:n.pointType,distance:Math.ceil(this.computeDistance(n.latLng.lat,n.latLng.lng))})}if(0===o.length)return alert("请在地图上选择地点"),0;Object(i["e"])(this.$route.query.houseId,o).then(function(o){0===o.code?1===e?t.$router.push("/house/addHistory"):t.$emit("changeActive",3):alert(o.msg)})},saveAndComplete:function(){this.submit(1)},saveAndNext:function(){this.submit(2)},next:function(){this.$emit("changeActive",3)}}},s=r,l=(o("9599"),o("2877")),c=Object(l["a"])(s,a,n,!1,null,"5b004d5e",null);t["default"]=c.exports},"883e":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{visible:e.isVisible,title:"授权菜单","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[o("div",{staticClass:"form"},[o("tree",{attrs:{nodes:e.menuTree,setting:e.setting},on:{onClick:e.onClick,onCheck:e.onCheck,onCreated:e.handleCreated}})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.postSelected}},[e._v("确认选择")])],1)])},n=[],i=(o("8e6e"),o("456d"),o("ac6a"),o("bd86")),r=o("5880"),s=o("f419"),l=o.n(s),c=o("1f27"),u=o("cc5e");function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(o,!0).forEach(function(t){Object(i["a"])(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var f={components:{tree:l.a},name:"grantMenuDialog",data:function(){return{isVisible:this.isShow,setting:{check:{enable:!0},data:{simpleData:{enable:!0,pIdKey:"parentId"}},view:{showIcon:!1,addHoverDom:this.addHoverDom,removeHoverDom:this.removeHoverDom},key:{url:"href"}},menuTree:[],zTreeObj:{},rootMenu:[],activeId:0}},props:{isShow:Boolean,dialogRow:Object},computed:p({},Object(r["mapGetters"])(["addFundDialog"])),created:function(){this.getRoleMenus()},methods:{closeDialog:function(){this.$emit("closeDialog")},getRoleMenus:function(){var e=this;Object(u["c"])(this.dialogRow.roleId).then(function(t){e.getMenuTree(t.data),console.log(t)})},getMenuTree:function(e){var t=this;Object(c["e"])().then(function(o){t.setChecked(o.data,e),t.menuTree=o.data})},setChecked:function(e,t){var o=this;e.forEach(function(e){t.indexOf(e.id)>-1&&(e.checked=!0),e.children&&e.children.length>0&&o.setChecked(e.children,t)})},onClick:function(e,t,o){return e.preventDefault(),!1},onCheck:function(e,t,o){},handleCreated:function(e){this.zTreeObj=e,this.zTreeObj.expandAll(!0)},postSelected:function(){var e=this,t=this.dialogRow.roleId,o=[];this.zTreeObj.getCheckedNodes().forEach(function(e){o.push(e.id)});var a=o.join(",");Object(u["f"])(t,a).then(function(t){0===t.code?e.$emit("refreshList"):alert(t.msg),e.closeDialog()})}}},m=f,h=(o("7324"),o("2877")),g=Object(h["a"])(m,a,n,!1,null,"5978493f",null);t["default"]=g.exports},9599:function(e,t,o){"use strict";var a=o("3cf7"),n=o.n(a);n.a},"96bd":function(e,t,o){"use strict";o.d(t,"d",function(){return r}),o.d(t,"c",function(){return s}),o.d(t,"a",function(){return l}),o.d(t,"b",function(){return c}),o.d(t,"e",function(){return u});var a=o("a27e"),n=o("4328"),i=o.n(n);function r(){return Object(a["a"])({url:"/admin/operator/tree",method:"get"})}function s(e){return Object(a["a"])({url:"/admin/operator/list",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/admin/operator/add",method:"post",data:i.a.stringify(e)})}function c(e){return Object(a["a"])({url:"/admin/operator/".concat(e),method:"delete"})}function u(e){return Object(a["a"])({url:"/admin/operator/update",method:"post",data:i.a.stringify(e)})}},ba91:function(e,t,o){},baa9:function(e,t,o){},bf5d:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{padding:"20px"}},[o("el-form",{attrs:{"label-width":"100px"}},[o("el-form-item",{attrs:{label:"房源图片"}},[o("el-upload",{attrs:{action:e.baseUrl+"/file/file",accept:"image/jpeg,image/png","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"before-upload":e.beforeAvatarUpload,"on-success":function(t,o,a){e.handleSuccess(t,o,a,1)},"on-remove":function(t,o){e.handleRemove(t,o,1)}}},[o("i",{staticClass:"el-icon-plus"})])],1),o("el-form-item",{attrs:{label:"户型图"}},[o("el-upload",{attrs:{action:e.baseUrl+"/file/file",accept:"image/jpeg,image/png","list-type":"picture-card","before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview,"on-success":function(t,o,a){e.handleSuccess(t,o,a,2)},"on-remove":function(t,o){e.handleRemove(t,o,2)}}},[o("i",{staticClass:"el-icon-plus"})])],1),o("el-form-item",{attrs:{label:"VR"}},[o("el-upload",{attrs:{action:e.baseUrl+"/file/file","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-success":function(t,o,a){e.handleSuccess(t,o,a,3)},"on-remove":function(t,o){e.handleRemove(t,o,3)}}},[o("i",{staticClass:"el-icon-plus"})])],1),o("el-form-item",{attrs:{label:"房源视频"}},[o("el-upload",{attrs:{action:e.baseUrl+"/file/file",accept:"video/mp4","list-type":"picture-card","before-upload":e.beforeVideoUpload,"on-preview":e.handlePictureCardPreview,"on-success":function(t,o,a){e.handleSuccess(t,o,a,4)},"on-remove":function(t,o){e.handleRemove(t,o,4)}}},[o("i",{staticClass:"el-icon-plus"})])],1)],1),o("div",{staticStyle:{"text-align":"center",padding:"40px 0"}},[o("el-button",{attrs:{type:"success",size:"medium"},on:{click:e.saveAndComplete}},[e._v("保存完成")])],1)],1)},n=[],i=(o("ac6a"),o("f803")),r={data:function(){return{baseUrl:"http://8.130.26.25:7005",dialogImageUrl:"",dialogVisible:!1,type1:[],type2:[],type3:[],type4:[]}},methods:{handleRemove:function(e,t,o){switch(o){case 1:this.type1=t;break;case 2:this.type2=t;break;case 3:this.type3=t;break;case 4:this.type4=t;break}},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},saveAndComplete:function(){var e=this,t=[];console.log(this.type1),console.log(this.type2),console.log(this.type3),console.log(this.type4),this.type1.forEach(function(e){t.push({url:e.response.data.url,resType:2})}),this.type2.forEach(function(e){t.push({url:e.response.data.url,resType:3})}),this.type3.forEach(function(e){t.push({url:e.response.data.url,resType:1})}),this.type4.forEach(function(e){t.push({url:e.response.data.url,resType:4})}),Object(i["g"])(this.$route.query.houseId,t).then(function(t){0===t.code?e.$router.push("/house/addHistory"):alert(t.msg)})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<10;return t||this.$message.error("上传的图片只能是 JPG或者 png 格式!"),o||this.$message.error("上传图片大小不能超过 2MB!"),t&&o},beforeVideoUpload:function(e){var t="video/mp4"===e.type,o=e.size/1024/1024<5;return t||this.$message.error("上传的图片只能是 JPG或者 png 格式!"),o||this.$message.error("上传的视频大小不能超过 5MB!"),t&&o},handleSuccess:function(e,t,o,a){switch(a){case 1:this.type1=o;break;case 2:this.type2=o;break;case 3:this.type3=o;break;case 4:this.type4=o;break}}}},s=r,l=o("2877"),c=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports},cc5e:function(e,t,o){"use strict";o.d(t,"g",function(){return r}),o.d(t,"f",function(){return s}),o.d(t,"c",function(){return l}),o.d(t,"i",function(){return c}),o.d(t,"a",function(){return u}),o.d(t,"b",function(){return d}),o.d(t,"d",function(){return p}),o.d(t,"e",function(){return f}),o.d(t,"h",function(){return m});var a=o("a27e"),n=o("4328"),i=o.n(n);function r(e){return Object(a["a"])({url:"/admin/role/list",method:"get",params:e})}function s(e,t){return Object(a["a"])({url:"/admin/role/".concat(e,"/grant/menu"),method:"post",data:i.a.stringify({menuIds:t})})}function l(e){return Object(a["a"])({url:"/admin/role/".concat(e,"/own/menu"),method:"get"})}function c(e){return Object(a["a"])({url:"/admin/role/update",method:"post",data:i.a.stringify(e)})}function u(e){return Object(a["a"])({url:"/admin/role/add",method:"post",data:i.a.stringify(e)})}function d(e){return Object(a["a"])({url:"/admin/role/".concat(e),method:"delete"})}function p(e){return Object(a["a"])({url:"/admin/role/".concat(e,"/own/operator")})}function f(e,t){return Object(a["a"])({url:"/admin/role/".concat(e,"/grant/operator"),method:"post",data:i.a.stringify({operatorIds:t})})}function m(e){return Object(a["a"])({url:"/admin/role/swap",method:"post",data:i.a.stringify(e)})}},d408:function(e,t,o){},e7f3:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{visible:e.isVisible,title:"修改角色","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[o("div",{staticClass:"form"},[o("el-form",{ref:"form",staticStyle:{margin:"10px",width:"auto"},attrs:{model:e.form,rules:e.form_rules,"label-width":e.dialog.formLabelWidth}},[o("el-form-item",{attrs:{prop:"username",label:"角色名称:"}},[o("el-input",{attrs:{type:"text"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),o("el-form-item",{attrs:{prop:"username",label:"描述:"}},[o("el-input",{attrs:{rows:4,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),o("el-form-item",{staticClass:"text_right"},[o("el-button",{on:{click:function(t){e.isVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("提  交")])],1)],1)],1)])},n=[],i=(o("8e6e"),o("ac6a"),o("456d"),o("bd86")),r=o("5880"),s=o("cc5e");function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,a)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(o,!0).forEach(function(t){Object(i["a"])(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var u={name:"updateDialog",data:function(){return{areaData:[],isVisible:this.isShow,form:{roleName:"",remark:""},form_rules:{roleName:[{required:!0,message:"用户名不能为空！",trigger:"blur"}]},dialog:{width:"400px",formLabelWidth:"120px"}}},props:{isShow:Boolean,dialogRow:Object},computed:c({},Object(r["mapGetters"])(["addFundDialog"])),mounted:function(){this.form=Object.assign({},this.dialogRow)},methods:{closeDialog:function(){this.$emit("closeDialog")},onSubmit:function(e){var t=this;this.$refs[e].validate(function(o){if(o){var a=t[e],n=Object.assign({},a);Object(s["i"])(n).then(function(e){0===e.code?(t.$message("修改成功"),t.closeDialog(),t.$emit("getFundList")):t.$message.error(e.msg)}),console.log(n)}})}}},d=u,p=(o("69d9"),o("2877")),f=Object(p["a"])(d,a,n,!1,null,"75f92873",null);t["default"]=f.exports}}]);