(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-725d21de"],{"0b64":function(e,t,n){"use strict";var r=n("4a11"),o=n.n(r);o.a},"4a11":function(e,t,n){},7053:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.isVisible,title:"授权操作","close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[n("div",{staticClass:"form"},[n("tree",{attrs:{nodes:e.menuTree,setting:e.setting},on:{onClick:e.onClick,onCheck:e.onCheck,onCreated:e.handleCreated}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.postSelected}},[e._v("确认选择")])],1)])},o=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),c=n("5880"),i=n("f419"),u=n.n(i),d=n("1f27"),s=n("cc5e"),l=n("96bd");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p={components:{tree:u.a},name:"grantMenuDialog",data:function(){return{isVisible:this.isShow,setting:{check:{enable:!0},data:{simpleData:{enable:!0,pIdKey:"parentId"}},view:{showIcon:!1,addHoverDom:this.addHoverDom,removeHoverDom:this.removeHoverDom},key:{url:"href"}},menuTree:[],zTreeObj:{},rootMenu:[],activeId:0,roleOperators:[]}},props:{isShow:Boolean,dialogRow:Object},computed:h({},Object(c["mapGetters"])(["addFundDialog"])),created:function(){this.getOperatorTree(),this.getRoleOperators()},methods:{getOperatorTree:function(){var e=this;Object(l["d"])().then(function(t){e.menuTree=t.data,e.menuTree.forEach(function(t){e.setOperatorChecked(t)}),console.log(e.menuTree)})},setOperatorChecked:function(e){var t=this;e.checkArr?e.checked=this.roleOperators.indexOf(e.id)>-1:e.nocheck=!0,e.children&&e.children.length>0&&e.children.forEach(function(e){t.setOperatorChecked(e)})},closeDialog:function(){this.$emit("closeDialog")},getRoleOperators:function(){var e=this;Object(s["d"])(this.dialogRow.roleId).then(function(t){e.roleOperators=t.data,console.log(e.roleOperators),e.getOperatorTree(),console.log(t)})},getMenuTree:function(e){var t=this;Object(d["e"])().then(function(n){t.setChecked(n.data,e),t.menuTree=n.data})},setChecked:function(e,t){var n=this;e.forEach(function(e){t.indexOf(e.id)>-1&&(e.checked=!0),e.children&&e.children.length>0&&n.setChecked(e.children,t)})},onClick:function(e,t,n){return e.preventDefault(),!1},onCheck:function(e,t,n){},handleCreated:function(e){this.zTreeObj=e},postSelected:function(){var e=this,t=this.dialogRow.roleId,n=[];this.zTreeObj.getCheckedNodes().forEach(function(e){n.push(e.id)});var r=n.join(",");console.log(r),Object(s["e"])(t,r).then(function(t){0===t.code?(e.$message("授权成功"),e.closeDialog()):e.$message.error(t.msg)})}}},m=p,b=(n("0b64"),n("2877")),O=Object(b["a"])(m,r,o,!1,null,"166fe3d5",null);t["default"]=O.exports},"96bd":function(e,t,n){"use strict";n.d(t,"d",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return s});var r=n("a27e"),o=n("4328"),a=n.n(o);function c(){return Object(r["a"])({url:"/admin/operator/tree",method:"get"})}function i(e){return Object(r["a"])({url:"/admin/operator/list",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/admin/operator/add",method:"post",data:a.a.stringify(e)})}function d(e){return Object(r["a"])({url:"/admin/operator/".concat(e),method:"delete"})}function s(e){return Object(r["a"])({url:"/admin/operator/update",method:"post",data:a.a.stringify(e)})}},cc5e:function(e,t,n){"use strict";n.d(t,"g",function(){return c}),n.d(t,"f",function(){return i}),n.d(t,"c",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"h",function(){return p});var r=n("a27e"),o=n("4328"),a=n.n(o);function c(e){return Object(r["a"])({url:"/admin/role/list",method:"get",params:e})}function i(e,t){return Object(r["a"])({url:"/admin/role/".concat(e,"/grant/menu"),method:"post",data:a.a.stringify({menuIds:t})})}function u(e){return Object(r["a"])({url:"/admin/role/".concat(e,"/own/menu"),method:"get"})}function d(e){return Object(r["a"])({url:"/admin/role/update",method:"post",data:a.a.stringify(e)})}function s(e){return Object(r["a"])({url:"/admin/role/add",method:"post",data:a.a.stringify(e)})}function l(e){return Object(r["a"])({url:"/admin/role/".concat(e),method:"delete"})}function f(e){return Object(r["a"])({url:"/admin/role/".concat(e,"/own/operator")})}function h(e,t){return Object(r["a"])({url:"/admin/role/".concat(e,"/grant/operator"),method:"post",data:a.a.stringify({operatorIds:t})})}function p(e){return Object(r["a"])({url:"/admin/role/swap",method:"post",data:a.a.stringify(e)})}}}]);