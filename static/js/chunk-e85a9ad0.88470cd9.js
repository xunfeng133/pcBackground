(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e85a9ad0"],{5528:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticStyle:{padding:"10px 0"},attrs:{"label-width":"100px"}},t._l(t.deals,function(e,a){return n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{prop:"development",label:"成交日期:"}},[n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",size:"medium",placeholder:"选择日期"},model:{value:e.time,callback:function(n){t.$set(e,"time",n)},expression:"item.time"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"成交价格"}},[n("el-input",{attrs:{size:"medium"},model:{value:e.amount,callback:function(n){t.$set(e,"amount",n)},expression:"item.amount"}},[n("template",{slot:"append"},[t._v("万")])],2)],1)],1),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{icon:"el-icon-add",type:"primary",size:"medium"},on:{click:function(e){return t.addOneDeal(a)}}},[t._v("添加")])],1)],1)}),1),n("div",{staticStyle:{"text-align":"center",padding:"40px 0"}},[n("el-button",{attrs:{type:"success",size:"medium"},on:{click:t.saveAndComplete}},[t._v("保存完成")]),n("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.next()}}},[t._v("下一步")]),n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.saveAndNext}},[t._v("保存并下一步")])],1)],1)},r=[],u=n("f803"),o={data:function(){return{deals:[{time:"",amount:""}]}},methods:{saveAndComplete:function(){this.submit(1)},saveAndNext:function(){this.submit(2)},next:function(){this.$emit("changeActive",4)},submit:function(t){var e=this;0===this.deals.length&&alert("历史成交记录不能为空");for(var n=0;n<this.deals.length;n++){var a=this.deals[n];if(!a.amount||!a.time)return alert("字段不能为空"),0}var r=new FormData;r.append("housePropertyId",this.$route.query.houseId),r.append("deals",JSON.stringify(this.deals)),Object(u["d"])(r).then(function(n){0===n.code?1===t?(alert("添加成功"),e.$router.push("/house/addHistory")):e.$emit("changeActive",4):alert(n.msg)})},addOneDeal:function(t){this.deals.splice(t+1,0,{dealDate:"",dealAmount:""})}}},s=o,i=n("2877"),c=Object(i["a"])(s,a,r,!1,null,null,null);e["default"]=c.exports},f803:function(t,e,n){"use strict";n.d(e,"l",function(){return o}),n.d(e,"i",function(){return s}),n.d(e,"o",function(){return i}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return d}),n.d(e,"j",function(){return l}),n.d(e,"h",function(){return m}),n.d(e,"f",function(){return p}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"g",function(){return b}),n.d(e,"k",function(){return v}),n.d(e,"n",function(){return y}),n.d(e,"a",function(){return g}),n.d(e,"m",function(){return O});var a=n("a27e"),r=n("4328"),u=n.n(r);function o(t){return Object(a["a"])({url:"/house/estate/admin/getInsertHistory4",method:"get",params:t})}function s(t,e){return Object(a["a"])({url:"/house/estate/getEstate/"+t,method:"get",params:e})}function i(t){return a["a"].post("house/estate/updatehouse",u.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function c(t,e){return Object(a["a"])({url:"house/estate/savehouse?clientSales.owner="+e,method:"post",params:t})}function d(t,e){return Object(a["a"])({url:"/house/estate/admin/savehouse?clientSales.owner="+e,method:"post",params:t})}function l(t){return Object(a["a"])({url:"/house/estate/admin/getInsertHistory",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/house/estate/auditList",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/house/estate/audit",method:"post",params:t})}function h(t,e){return Object(a["a"])({url:"/house/estate/addNearby/".concat(t),method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:e})}function f(t){return Object(a["a"])({headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"post",url:"/house/estate/extraInfo",data:t})}function b(t,e){return Object(a["a"])({method:"post",url:"/house/estate/batchAddHouseRes/".concat(t),data:e})}function v(){return Object(a["a"])({method:"get",url:"/house/estate/area"})}function y(t){return Object(a["a"])({method:"get",url:"/house/estate/searchEstate?key="+t})}function g(t){return Object(a["a"])({method:"post",url:"/house/estate/addEstate",data:u.a.stringify(t)})}function O(t){return Object(a["a"])({method:"post",url:"/house/estate/postAudit/".concat(t)})}}}]);