(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3340b677"],{1138:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{position:"relative"},attrs:{id:"container"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],staticStyle:{"z-index":"10000",width:"160px",position:"absolute",height:"40px",top:"20px",left:"10px"},attrs:{type:"text",placeholder:"请输入周边关键字"},domProps:{value:t.key},on:{input:function(e){e.target.composing||(t.key=e.target.value)}}}),n("button",{staticStyle:{"z-index":"10000",position:"absolute",height:"40px",top:"20px",left:"200px",width:"60px"},attrs:{type:"button"},on:{click:t.searchAround}},[t._v("搜索")])]),n("div",[n("ul",t._l(t.points,function(e){return n("li",{staticStyle:{"border-bottom":"1px solid #e0e0e0"}},[n("div",{staticStyle:{"margin-right":"5px"}},[t._v("地点名称："+t._s(e.name))]),n("div",{staticStyle:{"margin-right":"5px"}},[t._v("lat: "+t._s(e.latLng.lat))]),n("div",{staticStyle:{"margin-right":"5px"}},[t._v("lng: "+t._s(e.latLng.lng))]),n("div",{staticStyle:{"margin-right":"5px"}},[t._v("与房源距离："+t._s(t.computeDistance(e.latLng.lat,e.latLng.lng)))])])}),0)])])},i=[];var o={data:function(){return{map:null,markerLayer:null,markers:[],id:1,key:"",marker2:void 0,points:[],houseLatlng:{lat:"",lng:""}}},mounted:function(){this.initMap()},methods:{initMap:function(){var t=this,e=new TMap.LatLng(22.535512,114.028745);this.$set(this.houseLatlng,"lat",22.535512),this.$set(this.houseLatlng,"lng",114.028745);var n=new TMap.Map(document.getElementById("container"),{center:e,zoom:16});this.map=n;document.getElementById("mapContainer");var a=new TMap.InfoWindow({map:n,position:n.getCenter()}).close();n.on("click",function(e){var n=e.poi;n?(console.log(n),t.points.push(n),t.markerLayer.add({position:n.latLng,id:t.id++})):a.close()}),this.initMarkerLayer(n),this.createHouseMarker(22.535512,114.028745)},initMarkerLayer:function(t){this.markerLayer=new TMap.MultiMarker({id:"marker-layer",map:t})},searchAround:function(){console.log("ok");var t=["https://apis.map.qq.com/ws/place/v1/search","?boundary=nearby(22.535512,114.028745,1000,0)","&keyword=".concat(this.key),"&page_size=10&page_index=1&orderby=_distance","&output=jsonp&callback=cb","&key=6NKBZ-2OL3G-OP7QZ-I2KDF-CZGKT-HOFL5"].join("");this.jsonp_request(t)},jsonp_request:function(t){this.$jsonp(t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},createHouseMarker:function(t,e){this.marker2||(this.marker2=new TMap.MultiMarker({id:"marker-layer2",map:this.map,styles:{marker:new TMap.MarkerStyle({width:25,height:35,anchor:{x:16,y:32},src:"http://8.130.26.25:7005/file/20210507/e6fabe0608b34657b10a4459f228e928.png"})},geometries:[{id:"demo",styleId:"marker",position:new TMap.LatLng(t,e),properties:{title:"marker"}}]}))},computeDistance:function(t,e){console.log(t),console.log(e);var n=new TMap.LatLng(t,e),a=new TMap.LatLng(this.houseLatlng.lat,this.houseLatlng.lng),i=[n,a];return TMap.geometry.computeDistance(i)}}},r=o,s=(n("80c0"),n("2877")),l=Object(s["a"])(r,a,i,!1,null,"0c90da98",null);e["default"]=l.exports},"80c0":function(t,e,n){"use strict";var a=n("cca9"),i=n.n(a);i.a},cca9:function(t,e,n){}}]);